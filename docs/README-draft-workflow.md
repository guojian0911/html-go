# 草稿到发布工作流系统

## 📋 概述

HTML-Go 现在支持完整的草稿到发布工作流，让用户可以更好地管理他们的内容创作过程。

## 🎯 工作流程

### 1. 创建内容
- 在编辑器中编写 HTML、Markdown、SVG 或 Mermaid 代码
- 实时预览渲染效果
- 可以随时保存为草稿

### 2. 保存草稿
- 点击"保存草稿"按钮（原分享按钮）
- 内容自动保存到个人草稿箱
- 可以设置密码保护（发布时生效）
- 草稿状态为私有，只有作者可见

### 3. 管理草稿
- 在个人资料页面的"草稿"标签中查看所有草稿
- 支持预览、编辑、发布、删除操作
- 草稿有明显的标识和状态显示

### 4. 发布内容
- 在草稿箱中点击"发布"按钮
- 内容状态从草稿变为已发布
- 发布后的内容会出现在：
  - 主页画廊
  - 个人资料的"已发布"标签
  - 公开搜索结果

## ✨ 主要特性

### 🔒 隐私保护
- 草稿默认为私有状态
- 只有发布后才会公开显示
- 支持密码保护功能

### 📝 内容管理
- 清晰的草稿和已发布内容分离
- 支持批量管理操作
- 完整的编辑历史

### 🎨 用户体验
- 直观的状态标识
- 流畅的操作流程
- 及时的反馈提示

## 🛠️ 技术实现

### 数据库设计
- `render_pages` 表的 `status` 字段区分草稿和已发布状态
- 默认状态为 `'draft'`
- 发布后状态变为 `'published'`

### 前端组件
- 修改分享对话框为草稿保存界面
- 增强个人资料页面的内容管理功能
- 添加发布操作和状态显示

### 权限控制
- 草稿只有作者可见和操作
- 已发布内容公开可见
- 密码保护功能独立控制

## 📱 用户界面

### 编辑器界面
- "保存草稿"按钮替代原分享按钮
- 保存成功后显示草稿箱链接
- 支持继续编辑或查看草稿箱

### 个人资料页面
- "草稿"和"已发布"标签分离
- 草稿卡片有明显的状态标识
- 发布按钮突出显示

### 主页画廊
- 只显示已发布的内容
- 保持原有的浏览和搜索功能

## 🔄 迁移说明

### 现有数据
- 所有现有的 `published` 状态内容保持不变
- 新创建的内容默认为草稿状态
- 用户可以随时发布草稿

### 向后兼容
- 保持所有现有功能正常工作
- 分享链接和查看功能不受影响
- 用户数据完全保留

## 🚀 使用指南

### 创建和保存草稿
1. 在编辑器中创建内容
2. 点击"保存草稿"按钮
3. 可选择设置密码保护
4. 草稿保存到个人草稿箱

### 发布草稿
1. 进入个人资料页面
2. 切换到"草稿"标签
3. 找到要发布的草稿
4. 点击绿色"发布"按钮
5. 确认发布操作

### 管理已发布内容
1. 在"已发布"标签查看公开内容
2. 支持查看、编辑、删除操作
3. 编辑后需要重新发布

## 🎉 优势

### 对用户
- 更好的内容创作体验
- 清晰的发布流程控制
- 隐私保护和内容管理

### 对平台
- 提高内容质量
- 减少垃圾内容
- 更好的用户参与度

## 📞 支持

如有问题或建议，请通过以下方式联系：
- 在项目中创建 Issue
- 发送邮件反馈
- 参与社区讨论

---

**注意**: 这个工作流系统旨在提供更好的内容管理体验，同时保持平台的简洁性和易用性。
